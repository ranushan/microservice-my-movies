{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../../../src/mvc/decorators/class/controller.ts"],"names":[],"mappings":";;AAAA,qCAAqD;AACrD,iCAAuD;AAqBvD;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2BG;AACH,SAAgB,UAAU,CAAC,OAA4C,EAAE,GAAG,QAAqB;IAC/F,OAAO,CAAC,MAAW,EAAQ,EAAE;QAC3B,IAAI,OAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,YAAY,MAAM,IAAI,0BAAmB,CAAC,OAAO,CAAC,EAAE;YAC5F,uBAAkB,CAAC;gBACjB,OAAO,EAAE,MAAM;gBACf,IAAI,EAAE,OAAO;gBACb,QAAQ;aACT,CAAC,CAAC;SACJ;aAAM;YACL,uBAAkB,iBAChB,OAAO,EAAE,MAAM,EACf,QAAQ,EAAG,OAA8B,CAAC,YAAY,IAAK,OAA8B,CAAC,QAAQ,IAC/F,OAAO,EACV,CAAC;SACJ;IACH,CAAC,CAAC;AACJ,CAAC;AAhBD,gCAgBC","sourcesContent":["import {isArrayOrArrayClass, Type} from \"@tsed/core\";\nimport {IProvider, registerController} from \"@tsed/di\";\nimport {IRouterSettings} from \"../../../config\";\nimport {PathParamsType} from \"../../interfaces\";\n\nexport interface IControllerMiddlewares {\n  useBefore: any[];\n  use: any[];\n  useAfter: any[];\n}\n\nexport interface IControllerOptions extends Partial<IProvider<any>> {\n  path?: PathParamsType;\n  /**\n   * @deprecated\n   */\n  dependencies?: Type<any>[];\n  children?: Type<any>[];\n  routerOptions?: IRouterSettings;\n  middlewares?: Partial<IControllerMiddlewares>;\n}\n\n/**\n * Declare a new controller with his Rest path. His methods annotated will be collected to build the routing list.\n * This routing listing will be built with the `express.Router` object.\n *\n * ::: tip\n * See [Controllers](/docs/controllers.md) section for more details\n * :::\n *\n * ```typescript\n *  @Controller(\"/calendars\")\n *  export provide CalendarCtrl {\n *\n *    @Get(\"/:id\")\n *    public get(\n *      @Req() request: Req,\n *      @Res() response: Res,\n *      @Next() next: Next\n *    ): void {\n *\n *    }\n *  }\n * ```\n *\n * @param options\n * @param children\n * @returns {Function}\n * @decorator\n */\nexport function Controller(options: PathParamsType | IControllerOptions, ...children: Type<any>[]): Function {\n  return (target: any): void => {\n    if (typeof options === \"string\" || options instanceof RegExp || isArrayOrArrayClass(options)) {\n      registerController({\n        provide: target,\n        path: options,\n        children\n      });\n    } else {\n      registerController({\n        provide: target,\n        children: (options as IControllerOptions).dependencies || (options as IControllerOptions).children,\n        ...options\n      });\n    }\n  };\n}\n"]}